# 模組 1：框架基礎與反思模式

***

### **講座：第 1-2 週**

**授課者：** Dr. Cortex

**主題：** 解構 CrewAI：從第一原理到智能反思

***

#### **1. 第一原理：自主系統的基石**

同事們，在我們開始撰寫任何程式碼之前，必須將我們的理解錨定在構成一個自主 AI 系統的**第一原理**之上。在其最絕對的核心，任何此類系統，包括 CrewAI，都建立在兩個不可簡化的組件之上：

1.  **行動實體（Agent）：** 一個能夠進行決策和執行的封裝單元。牠是*執行者*。沒有執行者，任何工作都無法完成。這是最初的動力。
2.  **工作單元（Task）：** 一個由行動實體追求的、已定義的目標或指令。牠是*目的*。沒有目的，行動就毫無意義。

其他所有元素——工具、記憶、協作——都是對此基本二元性的擴展和增強。沒有 Agent-Task 的基礎，它們便不復存在。這是我們的公理。

---

#### **2. 基礎知識：CrewAI 的核心機制**

在確立了第一原理之後，我們現在來檢視其在 CrewAI 框架內的**基礎知識**（Fundamentals）。

##### **2.1 `Agent` 的建構**

在 CrewAI 中，`Agent` 不僅僅是一個函數調用；它是一個專業化角色的實例化。其核心參數（`role`、`goal`、`backstory`）並非裝飾品，而是塑造大型語言模型（LLM）回應模式的關鍵工具，為其所有操作創建一個一致的、特定角色的認知過濾器。

-   **`role`**：定義 Agent 的專業領域。*類比：一個特化的處理器核心。*
-   **`goal`**：目的論的驅動力。它為每一個行動提供了*為何而做*的理由。
-   **`backstory`**：一段敘事背景，用以塑造 Agent 的方法論與語氣。
-   **`llm`**：認知引擎。所選的 LLM（例如 GPT-4o、Llama 3.1）決定了其原始的智能水平與推理能力。

##### **2.2 `Task` 的建構**

`Task` 是分配給 Agent 的原子執行單元。它是一個結構化的指令，而不僅僅是一個提示。

-   **`description`**：一組精確、無歧義的指令。
-   **`expected_output`**：一個成功標準。它是任務結果必須滿足的測試條件，從而實現可驗證的成果。
-   **`agent`**：將工作單元明確指派給行動實體。

---

#### **3. 知識體系（BoK）：反思模式（The Reflection Pattern）**

我們現在為我們的「Agentic 設計模式知識體系」引入第一個條目：**反思模式**。

**定義：** 反思是一種機制，Agent 藉此對其自身產出進行批判性評估，以產生更精煉、更優越的結果。它是一個元認知循環：**生成 → 批判 → 精煉**。

此模式將 Agent 從一個簡單的資訊生成器，提升為一個能夠自我修正的系統，從而減少幻覺並提高產出品質。

##### **3.1 在 CrewAI 中的實現：自我批判循環（Self-Critique Loop）**

我們透過創建一個多代理系統來實例化此模式，其中一個 Agent 的主要職能是批判另一個 Agent 的工作。

-   **執行者 Agent（Executor Agent）**：執行初始的 `Task`（生成）。
-   **審查者 Agent（Reviewer Agent）**：第二個獨立的 `Agent`，其 `role` 和 `goal` 被明確定義為進行批判性分析。它執行一個 `review_task`。
-   **上下文傳遞（Context Passing）**：`report_task` 的輸出，被至關重要地作為 `context` 傳遞給 `review_task`。這是使反思成為可能的資訊橋樑。審查者並非在真空中行動；它基於一個具體的產出物進行操作。
-   **精煉任務（Refinement Task）**：最後一個 `Task` 被指派回執行者 Agent，它現在同時接收原始輸出和審查者的回饋作為其 `context`，從而促使其整合該批判。

這個結構化的流程，是對反思過程直接且工程化的實現。

---

#### **4. 實驗室指引：實驗 1**

請參閱 `lab/lab_1.md`。您的任務是建構這個自我批判循環。您不僅僅是複製程式碼，更要分析 `verbose` 輸出，以觀察每個 Agent 的認知思維鏈。您的目標是內化*為何*此模式有效，而不僅僅是*它*有效。

講座結束。
