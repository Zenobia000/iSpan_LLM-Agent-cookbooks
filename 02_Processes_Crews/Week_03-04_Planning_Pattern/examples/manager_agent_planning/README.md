# 範例：管理者代理規劃

本範例使用 CrewAI 中的**層級式流程 (Hierarchical Process)** 來展示**規劃模式 (Planning Pattern)**。

## 1. 目的

本範例的目標是展示一個 `manager_agent` 如何能自主地將一個複雜任務分解為一個多步驟的計劃，然後將這些步驟委派給一個由專家代理組成的團隊。對於需要超越簡單線性工作流程的複雜專案，這是一個非常強大的模式。

## 2. 如何運行

1.  **設定您的環境：**
    -   確保您已安裝必要的函式庫：
        ```bash
        pip install crewai crewai-tools
        ```
    -   在 `main.py` 或您的環境變數中設定您的 `OPENAI_API_KEY`。

2.  **執行腳本：**
    ```bash
    python main.py
    ```

## 3. 程式碼邏輯詳解

-   **`main.py`**:
    1.  **專家代理**：我們定義了幾個具有不同角色的代理：
        -   `planner`：管理者代理。其目標是創建並管理計劃。
        -   `researcher`：一個專門尋找和收集資訊的專家。
        -   `writer`：一個專門根據研究撰寫內容的專家。
    2.  **任務定義**：我們定義一個單一的、高層次的任務：就某個主題創建一份報告。此任務被指派給 `planner`。
    3.  **層級式 Crew**：
        -   `Crew` 被配置為 `process=Process.hierarchical`。
        -   指定了一個 `manager_llm`。這是 `planner` 代理將用來思考、分解問題和管理團隊的 LLM。
        -   當 crew 被 `kickoff()` 啟動時，管理者 (`planner`) 會接收到初始任務。然後，它會即時創建新的子任務，並根據其角色將它們委派給 `researcher` 和 `writer`。
    4.  **動態工作流程**：與順序流程不同，此處的工作流程不是預先定義的。它是在運行時由 `planner` 代理動態創建和管理的。

## 4. 預期輸出

這裡的詳細輸出將特別有見地。您將觀察到：
-   `planner` 代理的初始「思考」過程，它將主要目標分解為一個步驟清晰的計劃。
-   `planner` 創建新任務並將它們指派給 `researcher` 和 `writer`。
-   專家代理執行它們被指派的任務。
-   `planner` 審查專家們的工作並撰寫最終的答案。

最終的輸出將是一份由管理者代理完全協調完成的完整報告。
